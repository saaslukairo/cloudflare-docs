---
params:
  - dashName
---

import { APIRequest, Markdown, Render, TabItem, Tabs, DashButton } from "~/components";

When you use a static IP address, Magic WAN Connector can also act as a DHCP server in your network. To enable this feature:

<Tabs syncKey="dashPlusAPI"> <TabItem label="Dashboard">

{ props.dashName === "WAN Tunnels" ? (
	<>
		<Markdown
	text={`
		1. Log in to <a href="https://one.dash.cloudflare.com/">Cloudflare One</a>, and go to **Networks**.
		2. Go to **Connectors** > **Appliances** > **Profiles**.
	`}
	inline={false}
	/>
	</>
) : (
	<>
		<Markdown
	text={`
		1. Log in to the [Cloudflare dashboard](https://dash.cloudflare.com/) and select your account.
		2. Go to **Networking** > **Magic WAN** > **Connector on-ramps (beta)**.
	`}
	inline={false}
	/>
	</>
)
}
{/* Command needed so list starts on number 3 since steps 1, 2 are inside conditional render */}
<ol start="3">
<li>Select your Magic WAN Connector you want to configure &gt; <strong>Edit</strong>.</li>
<li>Select <strong>Network Configuration</strong>, and scroll down to <strong>LAN configuration</strong>.</li>
<li>In <strong>LAN configuration</strong>, select the LAN where you want to enable DHCP server.</li>
<li>Select <strong>Edit</strong>.</li>
<li>Under <strong>Static addressing</strong>, select <strong>This is a DHCP Server</strong>. You also have to specify:<ul><li>The DNS server address. You can have more than one IP address. Select <strong>Add DNS Server</strong> for each server you want to add.</li><li>The DHCP pool start</li><li>The DHCP pool end</li></ul></li>
</ol>

</TabItem> <TabItem label="API">

<Render file="account-id-api-key" product="networking-services" />

Create a [`PUT` request](/api/resources/magic_transit/subresources/sites/subresources/lans/methods/update/) to update the LAN where you want to enable DHCP server:

Example:

<APIRequest
  path="/accounts/{account_id}/magic/sites/{site_id}/lans/{lan_id}"
  method="PUT"
  json={{
    "lan": {
    "static_addressing": {
      "dhcp_server": {
        "dhcp_pool_end": "<IP_ADDRESS>",
        "dhcp_pool_start": "<IP_ADDRESS>",
        "dns_server": "<IP_ADDRESS>"
      }
    }
  }
  }}
/>

</TabItem> </Tabs>
