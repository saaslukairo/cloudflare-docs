---
params:
  - productName
  - rulesAutoAdvertiseURL
---

import { GlossaryTooltip, Markdown, Width } from "~/components"

[Magic Transit On Demand](/magic-transit/on-demand/) customers can use {props.productName} to analyze their network traffic and detect DDoS attacks while Magic Transit is disabled. If an attack is detected, customers can automatically or manually enable Magic Transit to mitigate DDoS attacks.

Customers can create {props.productName} rules which will monitor specific IP <GlossaryTooltip term="prefix">prefixes</GlossaryTooltip> for DDoS attacks. When a DDoS attack is detected, Cloudflare  will notify you by email, [webhook](/notifications/get-started/configure-webhooks/), or [PagerDuty](/notifications/get-started/configure-pagerduty/) with information about the attack. Then, you can choose to [automatically activate IP advertisement](#activate-ip-auto-advertisement) and enable Magic Transit to protect the targeted IP prefixes from DDoS attacks. This feature is referred to as auto-advertisement, and you can enable it for individual {props.productName} rules via the dashboard or API.

After Magic Transit is activated and your traffic is flowing through Cloudflare, malicious DDoS traffic will be blocked, and your origin servers will only receive clean network traffic via IPsec or GRE tunnels.

The diagrams below illustrate this process:

<Width size="large">
![The diagram shows the flow of traffic when you send flow data from your network to Cloudflare for analysis.](~/assets/images/magic-network-monitoring/1-flowdata.png)
</Width>

<Width size="large">
![Cloudflare automatically notifies you when we detect an attack based on your flow data.](~/assets/images/magic-network-monitoring/2-flowdata.png)
</Width>

<Width size="large">
![You can create rules to activate Magic Transit automatically, to protect your IP addresses from a DDoS attack.](~/assets/images/magic-network-monitoring/3-flowdata.png)
</Width>

## Activate IP auto-advertisement

You need to enable IP auto-advertisement in order to use {props.productName} rules. You can activate IP auto-advertisement via the dashboard or the API.

### Dashboard

To activate IP advertisement via the Cloudflare dashboard, refer to [Configure dynamic advertisement](/byoip/concepts/dynamic-advertisement/best-practices/#configure-dynamic-advertisement).

### API

To activate IP advertisement via the API, refer to the [IP Address Management Dynamic Advertisement API](/api/resources/addressing/subresources/prefixes/subresources/advertisement_status/methods/edit/).

## {props.productName} rules

To create {props.productName} rules with auto-advertisement, refer to <a href={props.rulesAutoAdvertiseURL}>Rule Auto-Advertisement</a>.
