---
pcx_content_type: how-to
title: Set up advanced nameservers
sidebar:
  order: 3
  label: Setup
---

import {
	TabItem,
	Tabs,
	APIRequest,
	Render,
	Details,
	Example,
	DashButton,
} from "~/components";

Advanced nameservers included with [Foundation DNS](/dns/foundation-dns/) are an opt-in configuration.

:::note
After enabling advanced nameservers, standard nameservers still respond to DNS queries.
:::

## Before you begin

Before opting in for advanced nameservers, consider the following:

- <Render file="ns-advanced-vs-custom" product="dns" />

### Differences from standard nameservers

Some behaviors are different from standard Cloudflare nameservers:

- Wildcard records are still supported but, with advanced nameservers, a wildcard record (`*.example.com`) will not apply to a subdomain that is an empty non-terminal. An empty non-terminal is a node in the DNS tree that has no records associated with it but has descendants that do, as exemplified below. This behavior is in compliance with [RFC 4592](https://www.rfc-editor.org/rfc/rfc4592.html), which defines the role of empty non-terminals in wildcard resolution.

<Details header="Example">

<Example>

DNS management for **example.com**

| **Type** | **Name** | **Content** |
| -------- | -------- | ------------------------- |
| A | * | `192.0.2.1` |
| A | a.b | `192.0.2.5` |

</Example>

In this example, `a.b.example.com` is a descendant of `b.example.com`, and `b.example.com` is an empty non-terminal. This means that the wildcard `*.example.com` will not apply to `b.example.com`.

</Details>

- Subdomain delegation: once a subdomain is delegated via NS records, Cloudflare will not serve any other records (such as A, TXT, or CNAME) on that subdomain from the parent zone, even if those records exist.

<Details header="Example">

<Example>

DNS management for **example.com**

| **Type** | **Name** | **Content** |
| -------- | -------- | ------------------------- |
| NS | www | ns1.externalhost.com |
| NS | www | ns2.externalhost.com |
| TXT | www | "5bb16e6b5a444eedb48ace40c471bcc9" |
| A | www | `192.0.2.1` |

</Example>

In this example, the TXT record and the A record for `www.example.com` will not be served.

</Details>

## Enable on a zone

To enable advanced nameservers on an existing zone:

1. Opt for advanced nameservers on your zone:

   <Tabs syncKey="dashPlusAPI"> <TabItem label="Dashboard">
   1. In the Cloudflare dashboard, go to the **DNS Records** page.

      <DashButton url="/?to=/:account/:zone/dns/records" />

   2. In the **Cloudflare nameservers** card, enable **Advanced nameservers**.
   3. After you refresh the page, the card will display the values for your advanced nameservers `NS` records.

   </TabItem> <TabItem label="API">

   Use the [Update DNS Settings](/api/resources/dns/subresources/settings/subresources/zone/methods/edit/) endpoint to send a PATCH request like the following:

   <APIRequest
   	path="/zones/{zone_id}/dns_settings"
   	method="PATCH"
   	json={{
   		foundation_dns: true,
   	}}
   />

   The response body will contain your assigned namservers in the `nameservers` object. You will use these nameservers in the next step.

   </TabItem> </Tabs>

2. Update the authoritative nameservers at your registrar. This step depends on whether you are using [Cloudflare Registrar](/registrar/):
   - If you are using Cloudflare Registrar, [contact Cloudflare Support](/support/contacting-cloudflare-support/) to have your nameservers updated.
   - If you are using a different registrar or if your zone is delegated to a parent zone, [manually update your nameservers](/dns/nameservers/update-nameservers/#specific-processes).

     :::caution

     Make sure the values for your assigned nameservers are copied exactly.
     :::