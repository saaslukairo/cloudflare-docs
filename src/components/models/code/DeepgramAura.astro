---
import { z } from "astro:schema";
import { Code } from "@astrojs/starlight/components";
import Details from "~/components/Details.astro";

type Props = z.infer<typeof props>;

const props = z.object({
	name: z.string(),
	lora: z.boolean(),
});

const { name } = props.parse(Astro.props);

const worker = `
export default {
  async fetch(request, env, ctx): Promise<Response> {
      const resp = await env.AI.run("${name}", {
        "text":"Hello World!"
      }, {
        returnRawResponse: true
      });

      return resp;
  },
} satisfies ExportedHandler<Env>;
`;

const curl = `
curl --request POST \
  --url 'https://api.cloudflare.com/client/v4/accounts/{ACCOUNT_ID}/ai/run/${name}' \
  --header 'Authorization: Bearer {TOKEN}' \
  --header 'Content-Type: application/json' \
  --data '{
    "text":"Hello world!"
}'
`;
---

<>
	<Details header="Worker">
		<Code code={worker} lang="ts" />
	</Details>

	<Details header="curl">
		<Code code={curl} lang="sh" />
	</Details>
</>
